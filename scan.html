<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>KIB — Scan QR</title>
  <link rel="stylesheet" href="scan.css" />
</head>

<body>
  <main class="page">
    <!-- Top bar -->
    <header class="topbar">
      <button class="icon-btn" type="button" onclick="history.back()" aria-label="Back">←</button>

      <div class="title">
        <div class="title-en">Scan QR</div>
        <div class="title-ko">QR 스캔</div>
      </div>

      <span class="spacer" aria-hidden="true"></span>
    </header>

    <!-- Two options -->
    <section class="card">
      <h2 class="h2">Choose an option</h2>

      <div class="tabs" role="tablist" aria-label="Scan options">
        <button id="tabShow" class="tab is-active" type="button" role="tab" aria-selected="true">Show QR</button>
        <button id="tabCam" class="tab" type="button" role="tab" aria-selected="false">Use Camera</button>
      </div>

      <!-- OPTION 1: SHOW QR -->
      <section id="panelShow" class="panel" role="tabpanel">
        <div class="qr-box" aria-label="QR to scan">
          <img
            id="qrImg"
            alt="KIB Payment QR"
            src="https://api.qrserver.com/v1/create-qr-code/?size=260x260&data=KIB-PAYMENT-DEMO"
          />
        </div>
        <p class="hint">Let someone scan this QR to pay.</p>

        <button id="copyLink" class="btn ghost" type="button">Copy payment link</button>
        <div id="copyMsg" class="msg" aria-live="polite"></div>
      </section>

      <!-- OPTION 2: CAMERA SCAN -->
      <section id="panelCam" class="panel" role="tabpanel" hidden>
        <div class="cam-wrap">
          <video id="video" playsinline muted></video>
          <div class="cam-overlay">
            <div class="scan-frame" aria-hidden="true"></div>
            <div class="cam-text">Point camera at QR</div>
          </div>
        </div>

        <div class="btn-row">
          <button id="startCam" class="btn" type="button">Start camera</button>
          <button id="stopCam" class="btn ghost" type="button" disabled>Stop</button>
        </div>

        <div id="scanResult" class="result" aria-live="polite"></div>
        <p id="fallback" class="hint"></p>
      </section>
    </section>
  </main>

  <script defer src="scan.js"></script>
</body>
</html>
